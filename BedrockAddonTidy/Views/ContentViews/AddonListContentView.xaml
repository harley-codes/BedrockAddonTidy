<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
			 xmlns:vm="clr-namespace:BedrockAddonTidy.ViewModels"
			 xmlns:om="clr-namespace:BedrockAddonTidy.ObjectModels"
			 xmlns:cnv="clr-namespace:BedrockAddonTidy.Converters"
			 x:DataType="vm:AddonListViewModel"
			 x:Class="BedrockAddonTidy.Views.ContentViews.AddonListContentView">
	<ContentView.Resources>
		<ResourceDictionary>
			<cnv:BoolInvertConverter x:Key="BoolInvertConverter"/>
			<cnv:ArrayLengthWarningBrushConverter x:Key="ArrayLengthWarningBrushConverter"/>
		</ResourceDictionary>
	</ContentView.Resources>
	<Border
		Margin="10"
		StrokeThickness="2"
		BackgroundColor="{StaticResource Gray900}"
		Opacity="0.8">
		<Grid RowDefinitions="Auto, *">
			<VerticalStackLayout
				Grid.Row="0"
				Padding="10, 10, 10, 5">
				<Button
					Text="+ Import Addon"
					IsEnabled="{Binding ImportAddonHandlerCommand.IsRunning, Converter={StaticResource BoolInvertConverter}, ConverterParameter=invert}"
					Command="{Binding ImportAddonHandlerCommand}"
					HorizontalOptions="Fill"/>
			</VerticalStackLayout>
			<ScrollView
				Grid.Row="1"
				Padding="10,0,10,10">
				<VerticalStackLayout>
					<CollectionView
						ItemsSource="{Binding AddonFileListSorted}"
						SelectionMode="Single"
						SelectedItem="{Binding SelectedItem, Mode=TwoWay}">
						<CollectionView.ItemsLayout>
							<LinearItemsLayout Orientation="Vertical"
											   ItemSpacing="5"/>
						</CollectionView.ItemsLayout>
						<CollectionView.ItemTemplate>
							<DataTemplate x:DataType="vm:AddonListItemViewModel">
								<Border
									Stroke="{Binding AddonWarnings, Converter={StaticResource ArrayLengthWarningBrushConverter}}"
									StrokeThickness="3"
									Padding="5"
									HeightRequest="100">
									<Grid ColumnDefinitions="*, auto"
										  Padding="5">
										<Grid
											Grid.Column="0"
											RowDefinitions="*,*,*,*,3">
											<HorizontalStackLayout Grid.Row="0"
																   Spacing="5">
												<Label Text="Name:"
													   FontAttributes="Bold"
													   VerticalOptions="Center"/>
												<Label Text="{Binding AddonFile.Name}"
													   VerticalOptions="Center"/>
											</HorizontalStackLayout>
											<HorizontalStackLayout Grid.Row="1"
																   Spacing="5">
												<Label Text="Type:"
													   FontAttributes="Bold"
													   VerticalOptions="Center"/>
												<Label Text="{Binding AddonFile.AddonType}"
													   VerticalOptions="Center"/>
											</HorizontalStackLayout>
											<HorizontalStackLayout Grid.Row="2"
																   Spacing="5">
												<Label Text="Version:"
													   FontAttributes="Bold"
													   VerticalOptions="Center"/>
												<Label Text="{Binding AddonFile.AnyVersion}"
													   VerticalOptions="Center"/>
											</HorizontalStackLayout>
											<HorizontalStackLayout Grid.Row="3"
																   Spacing="5">
												<Label Text="Experimental:"
													   FontAttributes="Bold"
													   VerticalOptions="Center"/>
												<Label Text="{Binding AddonFile.BehaviorPackUsingExperimental}"
													   VerticalOptions="Center"/>
											</HorizontalStackLayout>
											<HorizontalStackLayout Grid.Row="4"
																   Spacing="5">
												<Label Text="Author:"
													   FontAttributes="Bold"
													   VerticalOptions="Center"/>
												<Label Text="{Binding AddonFile.Author}"
													   VerticalOptions="Center"/>
											</HorizontalStackLayout>
										</Grid>
										<Border Grid.Column="1"
												Margin="5,0,0,0"
												Padding="0"
												StrokeShape="RoundRectangle 10"
												StrokeThickness="0">
											<Image Source="{Binding AddonFile.ImagePath}"/>
										</Border>
									</Grid>
								</Border>
							</DataTemplate>
						</CollectionView.ItemTemplate>
					</CollectionView>
				</VerticalStackLayout>
			</ScrollView>
		</Grid>
	</Border>
</ContentView>
